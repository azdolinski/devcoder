#!/bin/bash
# User-aware VSCodium launcher

BIN=/usr/share/codium/bin/codium

if [[ ! -x "$BIN" ]]; then
  echo "codium binary not found: $BIN" >&2
  exit 1
fi

mkdir -p "$HOME/.codium"

# Only cd to .codium if no arguments provided
if [[ $# -eq 0 ]]; then
  cd $HOME
fi

exec dbus-launch "$BIN" \
  --user-data-dir="$HOME/.codium" \
  --disable-telemetry \
  --no-sandbox \
  --password-store="gnome-libsecret" \
  "$@"


================================================================================
GITHUB ACTIONS WORKFLOW ANALYSIS
================================================================================


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WORKFLOW: Build and Push Docker Image
File: build-and-push.yml
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸŽ¯ TRIGGERS:
  â€¢ workflow_run
    â†’ workflows: ['Detect Release from CHANGELOG']
    â†’ types: ['completed']
  â€¢ push

ðŸ“‹ JOBS:

  Job: build-and-push
    Runs on: ubuntu-latest
    Environment: prod

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WORKFLOW: Container Security Scan
File: security-scan.yml
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸŽ¯ TRIGGERS:
  â€¢ workflow_run
    â†’ workflows: ['Build and Push Docker Image']
    â†’ types: ['completed']
  â€¢ push
  â€¢ pull_request
  â€¢ workflow_dispatch

ðŸ“‹ JOBS:

  Job: extract-version
    Runs on: ubuntu-latest
    Outputs: version, image-ref

  Job: trivy-scan
    Runs on: ubuntu-latest
    Depends on: extract-version

  Job: snyk-scan
    Runs on: ubuntu-latest
    Environment: prod
    Depends on: extract-version

  Job: dockle-scan
    Runs on: ubuntu-latest
    Depends on: extract-version

  Job: generate-report
    Runs on: ubuntu-latest
    Depends on: extract-version, trivy-scan, snyk-scan, dockle-scan

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WORKFLOW: Detect Release from CHANGELOG
File: detect-release.yml
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸŽ¯ TRIGGERS:
  â€¢ push

ðŸ“‹ JOBS:

  Job: detect-and-release
    Runs on: ubuntu-latest
    Environment: prod

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WORKFLOW: Simple Build Docker
File: simple-build.yml
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸŽ¯ TRIGGERS:
  â€¢ workflow_dispatch

ðŸ“‹ JOBS:

  Job: release
    Runs on: ubuntu-latest
    Environment: prod

================================================================================
WORKFLOW DEPENDENCY GRAPH
================================================================================

ðŸ”— Workflow chaining:
  Build and Push Docker Image â†’ Detect Release from CHANGELOG
  Container Security Scan â†’ Build and Push Docker Image

================================================================================
GENERATING MERMAID DIAGRAM
================================================================================

```mermaid
flowchart TD
    %% GitHub Actions Workflow Dependency Diagram

    classDef workflow fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef trigger fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef job fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef dataFlow fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px,stroke-dasharray: 5 5

    subgraph Build_and_Push_Docker_Image["Build and Push Docker Image"]
        direction TB

        Build_and_Push_Docker_Image_trigger["ðŸŽ¯ workflow_run | push"]:::trigger
        Build_and_Push_Docker_Image_build-and-push["ðŸ“‹ build-and-push\n(env: prod)"]:::job
    end

    subgraph Container_Security_Scan["Container Security Scan"]
        direction TB

        Container_Security_Scan_trigger["ðŸŽ¯ workflow_run | push"]:::trigger
        Container_Security_Scan_extract-version["ðŸ“‹ extract-version"]:::job
        Container_Security_Scan_extract-version -.->|('version', '${{ steps.version| Container_Security_Scan_extract-version_('version', '${{ steps.version[/"data"]:::dataFlow
        Container_Security_Scan_extract-version -.->|('image-ref', '${{ steps.versi| Container_Security_Scan_extract-version_('image-ref', '${{ steps.versi[/"data"]:::dataFlow
        Container_Security_Scan_trivy-scan["ðŸ“‹ trivy-scan"]:::job
        Container_Security_Scan_extract-version --> Container_Security_Scan_trivy-scan
        Container_Security_Scan_snyk-scan["ðŸ“‹ snyk-scan\n(env: prod)"]:::job
        Container_Security_Scan_extract-version --> Container_Security_Scan_snyk-scan
        Container_Security_Scan_dockle-scan["ðŸ“‹ dockle-scan"]:::job
        Container_Security_Scan_extract-version --> Container_Security_Scan_dockle-scan
        Container_Security_Scan_generate-report["ðŸ“‹ generate-report"]:::job
        Container_Security_Scan_extract-version --> Container_Security_Scan_generate-report
        Container_Security_Scan_trivy-scan --> Container_Security_Scan_generate-report
        Container_Security_Scan_snyk-scan --> Container_Security_Scan_generate-report
        Container_Security_Scan_dockle-scan --> Container_Security_Scan_generate-report
    end

    subgraph Detect_Release_from_CHANGELOG["Detect Release from CHANGELOG"]
        direction TB

        Detect_Release_from_CHANGELOG_trigger["ðŸŽ¯ push"]:::trigger
        Detect_Release_from_CHANGELOG_detect-and-release["ðŸ“‹ detect-and-release\n(env: prod)"]:::job
    end

    subgraph Simple_Build_Docker["Simple Build Docker"]
        direction TB

        Simple_Build_Docker_trigger["ðŸŽ¯ workflow_dispatch"]:::trigger
        Simple_Build_Docker_release["ðŸ“‹ release\n(env: prod)"]:::job
    end

    Detect_Release_from_CHANGELOG_trigger ==> |triggers| Build_and_Push_Docker_Image_trigger
    Build_and_Push_Docker_Image_trigger ==> |triggers| Container_Security_Scan_trigger
    Push["ðŸ“ git push"]:::trigger
    TagPush["ðŸ·ï¸ git tag"]:::trigger
    Manual["âš¡ Manual"]:::trigger

    TagPush --> Build_and_Push_Docker_Image_trigger
    TagPush --> Container_Security_Scan_trigger
    Manual --> Container_Security_Scan_trigger
    Push --> Detect_Release_from_CHANGELOG_trigger
    Manual --> Simple_Build_Docker_trigger
```

âœ… Diagram saved to: /mnt/self/.github/workflows/workflows-diagram.md
